webpackJsonp([1],{"+hAf":function(e,t){},"60Pi":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},s=n("VU/8")({name:"App",data:function(){return{}}},a,!1,null,null,null).exports,r=n("/ocq"),l=n("mvHQ"),u=n.n(l),c={name:"MainPage",data:function(){return{menuName:"",menuPrice:0,friendName:"",menu:[],friends:[],percent:10}},methods:{addMenu:function(){if(this.menuName&&this.menuPrice){var e={id:Date.now(),name:this.menuName,price:this.menuPrice};this.menu.push(e),this.menuName="",this.menuPrice=0}},addFriend:function(){if(this.friendName){var e={id:Date.now(),name:this.friendName,menus:[]};this.friends.push(e),this.friendName=""}},removeMenu:function(e){this.menu=this.menu.filter(function(t){return t.id!==e})},removeFriend:function(e){this.friends=this.friends.filter(function(t){return t.id!==e})},updateFriendMenu:function(e,t,n){var i=this.friends.find(function(e){return e.id===t});if(e){var a=this.menu.find(function(e){return e.id===n});i.menus.push(a)}else i.menus=i.menus.filter(function(e){return e.id!==n})},getDividedPrice:function(e,t){return parseInt(e)/this.getNumOfFriendsEatThis(t)},getSum:function(e){var t=this;return e.reduce(function(e,n){return e+parseInt(n.price)/t.getNumOfFriendsEatThis(n.id)},0)},getNumOfFriendsEatThis:function(e){var t=0;return this.friends.forEach(function(n){t=n.menus.find(function(t){return t.id===e})?t+1:t}),t},getSumPercent:function(e){var t=this.getSum(e);return t+t*this.percent/100},getSumTotal:function(){return this.menu.reduce(function(e,t){return e+parseInt(t.price)},0)},getSumTotalPercent:function(){var e=this.getSumTotal();return e+e*this.percent/100},saveToLocalStorage:function(){localStorage.setItem("friends",u()(this.friends)),localStorage.setItem("menu",u()(this.menu))},loadFromLocalStorage:function(){this.friends=JSON.parse(localStorage.getItem("friends"))||[],this.menu=JSON.parse(localStorage.getItem("menu"))||[]}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main-page"}},[n("div",{attrs:{id:"forms"}},[n("div",{attrs:{id:"form-menu"}},[n("p",{staticStyle:{margin:"5px 5px 20px"}},[e._v("Добавить элемент меню:")]),n("el-form",{attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Наименование"}},[n("el-input",{model:{value:e.menuName,callback:function(t){e.menuName=t},expression:"menuName"}})],1),n("el-form-item",{attrs:{label:"Цена"}},[n("el-input",{attrs:{type:"number"},model:{value:e.menuPrice,callback:function(t){e.menuPrice=t},expression:"menuPrice"}})],1),n("el-form-item",[n("el-button",{on:{click:e.addMenu}},[e._v("Добавить в меню")])],1)],1)],1),n("div",{attrs:{id:"form-friends"}},[n("p",{staticStyle:{margin:"5px 5px 20px"}},[e._v("Добавить друга:")]),n("el-form",{attrs:{"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Имя"}},[n("el-input",{model:{value:e.friendName,callback:function(t){e.friendName=t},expression:"friendName"}})],1),n("el-form-item",[n("el-button",{on:{click:e.addFriend}},[e._v("Добавить в таблицу")])],1)],1)],1)]),e.menu&&e.menu.length>0?n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[e._v("Еда:")]),n("div",{staticClass:"menu"},e._l(e.menu,function(t,i){return n("div",{key:t.id,staticClass:"menu-item"},[n("p",{staticStyle:{"margin-bottom":"8px"}},[e._v(e._s(i+1)+" позиция"),n("el-button",{staticClass:"btn-remove",attrs:{size:"mini"},on:{click:function(n){e.removeMenu(t.id)}}},[e._v("удалить")])],1),n("el-input",{model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}}),n("el-input",{attrs:{type:"number"},model:{value:t.price,callback:function(n){e.$set(t,"price",n)},expression:"item.price"}})],1)}))]):e._e(),e.friends&&e.friends.length>0?n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[e._v("Попали в эксельку:")]),n("div",{staticClass:"friends"},e._l(e.friends,function(t,i){return n("div",{key:t.id,staticClass:"friend"},[n("p",{staticStyle:{"margin-bottom":"8px"}},[e._v(e._s(i+1)+" друг"),n("el-button",{staticClass:"btn-remove",attrs:{size:"mini"},on:{click:function(n){e.removeFriend(t.id)}}},[e._v("удалить")])],1),n("el-input",{model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1)}))]):e._e(),n("div",{staticClass:"table-container"},[e.menu&&e.menu.length>0&&e.friends&&e.friends.length>0?n("div",{staticClass:"table"},[n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell"},[e._v("Наименование | Цена")]),e._l(e.friends,function(t){return n("div",{key:t.id,staticClass:"table-cell"},[e._v(e._s(t.name))])}),n("div",{staticClass:"table-cell"})],2),e._l(e.menu,function(t){return n("div",{key:t.id,staticClass:"table-row"},[n("div",{staticClass:"table-cell"},[e._v(e._s(t.name)+" | "+e._s(t.price))]),e._l(e.friends,function(i){return n("div",{key:i.id,staticClass:"table-cell"},[n("el-checkbox",{on:{change:function(n){e.updateFriendMenu(n,i.id,t.id)}}}),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("noInfinityAndFixed")(e.getDividedPrice(t.price,t.id))))])],1)}),n("div",{staticClass:"table-cell"})],2)}),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell"},[e._v("Итого")]),e._l(e.friends,function(t){return n("div",{key:t.id,staticClass:"table-cell"},[e._v(e._s(e._f("noInfinityAndFixed")(e.getSum(t.menus))))])}),n("div",{staticClass:"table-cell"},[e._v(e._s(e._f("noInfinityAndFixed")(e.getSumTotal())))])],2),n("div",{staticClass:"table-row"},[n("div",{staticClass:"table-cell"},[e._v("Итого с процентом"),n("el-input",{staticClass:"percent",attrs:{type:"number",max:"100",min:"0"},model:{value:e.percent,callback:function(t){e.percent=t},expression:"percent"}}),n("span",[e._v("%")])],1),e._l(e.friends,function(t){return n("div",{key:t.id,staticClass:"table-cell"},[e._v(e._s(e._f("noInfinityAndFixed")(e.getSumPercent(t.menus))))])}),n("div",{staticClass:"table-cell"},[e._v(e._s(e._f("noInfinityAndFixed")(e.getSumTotalPercent())))])],2)],2):e._e()]),n("el-button",{on:{click:e.saveToLocalStorage}},[e._v("Сохранить")]),n("el-button",{on:{click:e.loadFromLocalStorage}},[e._v("Загрузить")])],1)},staticRenderFns:[]},d=n("VU/8")(c,o,!1,null,null,null).exports;i.default.use(r.a);var m=new r.a({routes:[{path:"/",name:"MainPage",component:d},{path:"/:page",redirect:"/"}]}),f=n("NYxO");i.default.use(f.a);var v=new f.a.Store({state:{userLoading:!0},getters:{getUserLoading:function(e){return e.userLoading}},mutations:{setUserLoading:function(e,t){e.userLoading=t}},actions:{actionSetUserLoading:function(e,t){(0,e.commit)("setUserLoading",t)}},modules:{}}),p=(n("feh2"),n("ypWw"),n("e0XP"),n("zL8q")),h=n.n(p),_=(n("+hAf"),n("wUZ8")),g=n.n(_),b=n("hlPV"),x=n.n(b),C=n("n8qV"),S=n.n(C);n("60Pi"),n("VK60");i.default.use(h.a,{locale:g.a}),i.default.use(x.a),i.default.use(S.a),i.default.filter("noInfinityAndFixed",function(e){return e===1/0?"":e.toFixed(2)}),i.default.config.productionTip=!1,new i.default({el:"#app",router:m,store:v,components:{App:s},template:"<App/>"})},VK60:function(e,t){},e0XP:function(e,t){},feh2:function(e,t){},ypWw:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3a3eae394c305246afad.js.map